<h2><i nz-icon nzType="edit" nzTheme="outline"></i> Nhập đơn hàng</h2>
<action-button></action-button>
<div class="mt-5">
  <nz-table #basicTable [nzData]="orders">
    <thead>
      <tr>
        <th>Mã đơn hàng</th>
        <th>Tên</th>
        <th>Kênh bán</th>
        <th>Tổng tiền</th>
        <th>Đã thanh toán</th>
        <th>Trạng thái đơn hàng</th>
        <th class="text-center">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of basicTable.data">
        <td>{{ data.code }}</td>
        <td>{{ data.clientName }}</td>
        <td>{{ data.channel }}</td>
        <td>{{ data.totalPayment }}</td>
        <td>{{ data.payment }}</td>
        <td>{{ data.status }}</td>
        <td class="text-center">
          <action-table-button></action-table-button>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>

<button nz-button [nzType]="'primary'" (click)="showModal()"><span>Show Modal</span></button>
<button nz-button [nzType]="'primary'" (click)="showAnotherModal()"><span>Show Form</span></button>
<nz-modal [nzFooter]="null" [(nzVisible)]="isVisible" nzTitle="Thông tin chi tiết đơn hàng"
  (nzOnCancel)="handleCancel()">
  <ng-container *nzModalContent>
    <div *ngFor="let item of orders">
      <div class="invoice">
        <div class="d-flex">
          <div class="info-detail">Mã đơn hàng:</div>
          <div class="text-danger">{{ item.code }}</div>
        </div>
        <div class="d-flex">
          <div class="info-detail">Tên khách hàng:</div>
          <div>{{ item.clientName }}</div>
        </div>
        <div class="d-flex">
          <div class="info-detail">Số điện thoại:</div>
          <div>{{ item.phone }}</div>
        </div>
        <div class="d-flex">
          <div class="info-detail">Địa chỉ:</div>
          <div>{{ item.address }}</div>
        </div>
        <div class="d-flex">
          <div class="info-detail">Kênh bán:</div>
          <div>{{ item.channel }}</div>
        </div>
        <h3 class="py-3">Chi tiết đơn hàng</h3>
        <nz-table nzShowPagination="false" #basicTable [nzData]="item.children">
          <thead>
            <tr>
              <th>STT</th>
              <th nzWidth="80%">Sản phẩm</th>
              <th>Số lượng</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of basicTable.data">
              <td>1</td>
              <td>{{ data.productCode }} - {{data.productName}}: {{ data.productType }}</td>
              <td>{{ data.amount }}</td>
            </tr>
          </tbody>
        </nz-table>
        <div class="d-flex justify-content-between pt-3">
          <div>Tổng tiền:</div>
          <div>{{ item.totalPrice }}</div>
        </div>
        <div class="d-flex justify-content-between">
          <div>Discount:</div>
          <div>{{ item.discount }}</div>
        </div>
        <div class="d-flex justify-content-between">
          <div>Đã thanh toán:</div>
          <div>{{ item.payment }}</div>
        </div>
        <div class="d-flex justify-content-between">
          <div>Tổng thanh toán:</div>
          <div class="text-danger">{{ item.totalPayment }}</div>
        </div>
        <p class="note">{{ item.note }}</p>
      </div>
    </div>
    <nz-divider></nz-divider>
    <div class="d-flex justify-content-end">
      <button (click)="handleOk()" nz-button nzType="primary">Đóng</button>
    </div>
  </ng-container>
</nz-modal>

<!-- form modules -->
<nz-modal nzWidth="75%" [(nzVisible)]="isDisplay" nzTitle="Nhập đơn hàng" (nzOnCancel)="handleAnotherCancel()"
  (nzOnOk)="handleAnotherOk()">
  <ng-container *nzModalContent>
    <div *ngFor="let item of orders">
      <form class="row">
        <div class="col-12 col-md-7">
          <nz-form-item>
            <nz-form-label nzRequired>Tên</nz-form-label>
            <nz-form-control>
              <input nz-input>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12 col-md-5">
          <nz-form-item>
            <nz-form-label nzRequired>Số điện thoại</nz-form-label>
            <nz-form-control>
              <input nz-input>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12">
          <nz-form-item>
            <nz-form-label nzRequired>Địa chỉ</nz-form-label>
            <nz-form-control>
              <input nz-input>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12">
          <nz-form-item>
            <nz-form-label nzRequired>Kênh bán</nz-form-label>
            <nz-form-control>
              <nz-radio-group>
                <label nz-radio nzValue="A">Facebook</label>
                <label nz-radio nzValue="B">Website</label>
                <label nz-radio nzValue="C">Shopee</label>
                <label nz-radio nzValue="D">Instagram</label>
              </nz-radio-group>
            </nz-form-control>
          </nz-form-item>
        </div>
        <nz-form-item>
          <nz-form-label nzRequired>Sản phẩm</nz-form-label>
          <nz-form-control>
            <nz-input-group nzCompact>
              <nz-select [ngModel]="'Option1'" [ngModelOptions]="{standalone: true}" style="width:20%;">
                <nz-option [nzLabel]="'Nhẫn'" [nzValue]="'Option1'"></nz-option>
                <nz-option [nzLabel]="'Khuyên tai'" [nzValue]="'Option2'"></nz-option>
              </nz-select>
              <input type="text" nz-input style="width:60%;" />
              <nz-input-number style="width:20%;"></nz-input-number>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <div class=" col-12 d-flex justify-content-end my-2">
          <div>Tổng tiền hàng: <span class="price  ms-md-2">20,000đ</span></div>
        </div>
        <div class="col-12 col-md-4">
          <nz-form-item>
            <nz-form-label nzRequired>Chiết khấu</nz-form-label>
            <nz-form-control>
              <nz-input-number></nz-input-number>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12 col-md-4">
          <nz-form-item>
            <nz-form-label nzRequired>Phí ship</nz-form-label>
            <nz-form-control>
              <nz-select [ngModel]="'Option1'" [ngModelOptions]="{standalone: true}">
                <nz-option [nzLabel]="'25,000đ'" [nzValue]="'Option1'"></nz-option>
                <nz-option [nzLabel]="'0đ'" [nzValue]="'Option2'"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12 col-md-4">
          <nz-form-item>
            <nz-form-label nzRequired>Phí ship thực</nz-form-label>
            <nz-form-control>
              <nz-select [ngModel]="'Option1'" [ngModelOptions]="{standalone: true}">
                <nz-option [nzLabel]="'25,000đ'" [nzValue]="'Option1'"></nz-option>
                <nz-option [nzLabel]="'0đ'" [nzValue]="'Option2'"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12 col-md-4 d-flex justify-content-end">
          <div> Thanh toán: <span class="payment-price ms-md-2">20,000đ</span></div>
        </div>
        <nz-form-item>
          <nz-form-label>Ghi chú</nz-form-label>
          <nz-form-control>
            <textarea nz-input placeholder="Controlled autosize" [nzAutosize]="{ minRows: 1, maxRows: 3}"></textarea>
          </nz-form-control>
        </nz-form-item>
      </form>
    </div>
  </ng-container>
</nz-modal>
